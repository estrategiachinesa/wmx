
{
  "entities": {
    "LinkConfig": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LinkConfig",
      "type": "object",
      "description": "Stores application affiliate and support links.",
      "properties": {
        "hotmartUrl": {
          "type": "string",
          "format": "uri",
          "description": "The affiliate link for the Hotmart product."
        },
        "exnovaUrl": {
          "type": "string",
          "format": "uri",
          "description": "The affiliate link for the Exnova broker."
        },
        "iqOptionUrl": {
          "type": "string",
          "format": "uri",
          "description": "The affiliate link for the IQ Option broker."
        },
        "telegramUrl": {
          "type": "string",
          "format": "uri",
          "description": "The link to the support group on Telegram."
        }
      },
      "required": [
        "hotmartUrl",
        "exnovaUrl",
        "iqOptionUrl",
        "telegramUrl"
      ]
    },
    "LimitConfig": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LimitConfig",
      "type": "object",
      "description": "Stores usage limits for the application.",
      "properties": {
        "hourlySignalLimit": {
          "type": "number",
          "description": "The number of signals a non-premium user can generate per hour."
        }
      },
      "required": [
        "hourlySignalLimit"
      ]
    },
    "RegistrationConfig": {
      "title": "Registration Config",
      "description": "Stores the secret code for app registration.",
      "type": "object",
      "properties": {
        "registrationSecret": {
          "type": "string",
          "description": "A secret code that users must enter to register."
        }
      },
      "required": ["registrationSecret"]
    },
    "OfferConfig": {
      "title": "Offer Config",
      "description": "Stores the price for the VIP offer.",
      "type": "object",
      "properties": {
        "price": {
          "type": "string",
          "description": "The formatted price string for the VIP offer (e.g., 'R$ 197')."
        }
      },
      "required": ["price"]
    },
    "VipRequest": {
      "title": "VIP Access Request",
      "description": "Stores a user's request for VIP access after signing up through an affiliate link.",
      "type": "object",
      "properties": {
        "brokerId": {
          "type": "string",
          "description": "The user's ID from the brokerage account.",
          "pattern": "^[0-9]{8,}$"
        },
        "userId": {
          "type": "string",
          "description": "The Firebase Authentication UID of the user."
        },
        "userEmail": {
          "type": "string",
          "format": "email",
          "description": "The email of the user requesting access."
        },
        "status": {
          "type": "string",
          "description": "The current status of the VIP request.",
          "enum": [
            "PENDING",
            "AWAITING_DEPOSIT",
            "DEPOSIT_PENDING",
            "APPROVED",
            "REJECTED",
            "PREMIUM"
          ]
        },
        "submittedAt": {
          "type": "string",
          "description": "The date and time when the request was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "brokerId",
        "userId",
        "status",
        "submittedAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/appConfig/links",
        "definition": {
          "entityName": "LinkConfig",
          "schema": {
            "$ref": "#/backend/entities/LinkConfig"
          },
          "description": "Stores global application affiliate links. This is a single document."
        }
      },
      {
        "path": "/appConfig/limitation",
        "definition": {
          "entityName": "LimitConfig",
          "schema": {
            "$ref": "#/backend/entities/LimitConfig"
          },
          "description": "Stores global application usage limits. This is a single document."
        }
      },
       {
        "path": "/appConfig/registration",
        "definition": {
          "entityName": "RegistrationConfig",
          "schema": {
            "$ref": "#/backend/entities/RegistrationConfig"
          },
          "description": "Stores the global registration secret. This is a single document."
        }
      },
      {
        "path": "/appConfig/offer",
        "definition": {
          "entityName": "OfferConfig",
          "schema": {
            "$ref": "#/backend/entities/OfferConfig"
          },
          "description": "Stores the VIP offer price. This is a single document."
        }
      },
      {
        "path": "/vipRequests/{userId}",
        "definition": {
          "entityName": "VipRequest",
          "schema": {
            "$ref": "#/backend/entities/VipRequest"
          },
          "description": "Stores VIP access requests from users. The document ID is the user's Firebase UID.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Authentication UID of the user."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to handle VIP access requests and global app configurations. It now includes a registration document under /appConfig to hold a secret code for signup validation. VIP requests are stored per user, using their UID as the document ID. Global configurations are stored in single documents under `/appConfig` for easy access."
  }
}
