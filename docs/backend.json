
{
  "entities": {
    "ChineseStrategy": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ChineseStrategy",
      "type": "object",
      "description": "Represents a Chinese trading strategy.  This entity stores the details of a specific trading strategy, including its name, description, and rules.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Chinese Strategy entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the trading strategy."
        },
        "description": {
          "type": "string",
          "description": "A detailed explanation of the strategy, including its principles and rules."
        },
        "rules": {
          "type": "string",
          "description": "The specific rules that define the strategy. Includes entry and exit criteria"
        },
        "createdAt": {
          "type": "string",
          "description": "The date and time when the strategy was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "The date and time when the strategy was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "rules",
        "createdAt",
        "updatedAt"
      ]
    },
    "VipRequest": {
      "title": "VIP Access Request",
      "description": "Stores a user's request for VIP access after signing up through an affiliate link.",
      "type": "object",
      "properties": {
        "brokerId": {
          "type": "string",
          "description": "The user's ID from the brokerage account.",
          "pattern": "^[0-9]{8,}$"
        },
        "userId": {
          "type": "string",
          "description": "The Firebase Authentication UID of the user."
        },
        "userEmail": {
          "type": "string",
          "format": "email",
          "description": "The email of the user requesting access."
        },
        "status": {
          "type": "string",
          "description": "The current status of the VIP request.",
          "enum": [
            "PENDING",
            "AWAITING_DEPOSIT",
            "APPROVED",
            "REJECTED"
          ]
        },
        "submittedAt": {
          "type": "string",
          "description": "The date and time when the request was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "brokerId",
        "userId",
        "status",
        "submittedAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/chineseStrategies/{chineseStrategyId}",
        "definition": {
          "entityName": "ChineseStrategy",
          "schema": {
            "$ref": "#/backend/entities/ChineseStrategy"
          },
          "description": "Stores all Chinese strategy documents.",
          "params": [
            {
              "name": "chineseStrategyId",
              "description": "The unique identifier for a Chinese strategy document."
            }
          ]
        }
      },
      {
        "path": "/vipRequests/{userId}",
        "definition": {
          "entityName": "VipRequest",
          "schema": {
            "$ref": "#/backend/entities/VipRequest"
          },
          "description": "Stores VIP access requests from users. The document ID is the user's Firebase UID.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Authentication UID of the user."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to store Chinese trading strategies and VIP access requests. The design prioritizes simplicity. All Chinese Strategy documents are stored in a single collection, `/chineseStrategies`. VIP requests are stored in `/vipRequests`, with the document ID being the user's UID to ensure each user can only have one request, simplifying management and validation. This supports secure operations as rules can be applied based on user authentication state and document ownership."
  }
}
