
{
  "entities": {
    "LinkConfig": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LinkConfig",
      "type": "object",
      "description": "Stores application affiliate and support links.",
      "properties": {
        "hotmartUrl": {
          "type": "string",
          "format": "uri",
          "description": "The affiliate link for the Hotmart product."
        },
        "exnovaUrl": {
          "type": "string",
          "format": "uri",
          "description": "The affiliate link for the Exnova broker."
        },
        "iqOptionUrl": {
          "type": "string",
          "format": "uri",
          "description": "The affiliate link for the IQ Option broker."
        },
        "telegramUrl": {
          "type": "string",
          "format": "uri",
          "description": "The link to the support group on Telegram."
        }
      },
      "required": [
        "hotmartUrl",
        "exnovaUrl",
        "iqOptionUrl",
        "telegramUrl"
      ]
    },
    "LimitConfig": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LimitConfig",
      "type": "object",
      "description": "Stores usage limits for the application.",
      "properties": {
        "hourlySignalLimit": {
          "type": "number",
          "description": "The number of signals a non-premium user can generate per hour."
        }
      },
      "required": [
        "hourlySignalLimit"
      ]
    },
    "RegistrationCode": {
      "title": "Registration Code",
      "description": "A unique code provided after purchase to allow app registration. The document ID is the code itself.",
      "type": "object",
      "properties": {
        "isUsed": {
          "type": "boolean",
          "description": "Indicates if the code has already been used."
        },
        "usedBy": {
          "type": "string",
          "description": "The UID of the user who used the code."
        }
      },
      "required": ["isUsed"]
    },
    "VipRequest": {
      "title": "VIP Access Request",
      "description": "Stores a user's request for VIP access after signing up through an affiliate link.",
      "type": "object",
      "properties": {
        "brokerId": {
          "type": "string",
          "description": "The user's ID from the brokerage account.",
          "pattern": "^[0-9]{8,}$"
        },
        "userId": {
          "type": "string",
          "description": "The Firebase Authentication UID of the user."
        },
        "userEmail": {
          "type": "string",
          "format": "email",
          "description": "The email of the user requesting access."
        },
        "status": {
          "type": "string",
          "description": "The current status of the VIP request.",
          "enum": [
            "PENDING",
            "AWAITING_DEPOSIT",
            "DEPOSIT_PENDING",
            "APPROVED",
            "REJECTED",
            "PREMIUM"
          ]
        },
        "submittedAt": {
          "type": "string",
          "description": "The date and time when the request was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "brokerId",
        "userId",
        "status",
        "submittedAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/appConfig/links",
        "definition": {
          "entityName": "LinkConfig",
          "schema": {
            "$ref": "#/backend/entities/LinkConfig"
          },
          "description": "Stores global application affiliate links. This is a single document."
        }
      },
      {
        "path": "/appConfig/limitation",
        "definition": {
          "entityName": "LimitConfig",
          "schema": {
            "$ref": "#/backend/entities/LimitConfig"
          },
          "description": "Stores global application usage limits. This is a single document."
        }
      },
      {
        "path": "/registrationCodes/{codeId}",
        "definition": {
          "entityName": "RegistrationCode",
          "schema": {
            "$ref": "#/backend/entities/RegistrationCode"
          },
          "description": "Stores unique registration codes. The document ID is the code itself.",
           "params": [
            {
              "name": "codeId",
              "description": "The unique registration code string."
            }
          ]
        }
      },
      {
        "path": "/vipRequests/{userId}",
        "definition": {
          "entityName": "VipRequest",
          "schema": {
            "$ref": "#/backend/entities/VipRequest"
          },
          "description": "Stores VIP access requests from users. The document ID is the user's Firebase UID.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Authentication UID of the user."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to handle VIP access requests and global app configurations. It now includes a collection for registration codes to secure the signup process. VIP requests are stored per user, using their UID as the document ID. Global configurations are stored in single documents under `/appConfig`. The registration codes are stored in their own collection where the document ID is the code itself, allowing for quick lookups."
  }
}

    